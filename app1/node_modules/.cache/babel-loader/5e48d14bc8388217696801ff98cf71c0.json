{"ast":null,"code":"function getAggregatedStats(records) {\n  const agreggated = {};\n\n  for (const platform of Object.keys(records)) {\n    agreggated[platform] = getStats(records[platform]);\n  }\n\n  const totalRecords = Object.values(records).flat();\n  agreggated['global'] = getStats(totalRecords);\n  return agreggated;\n}\n\nfunction getStats(records) {\n  return timeframes.reduce((acc, _ref, timeframeIndex) => {\n    let {\n      name\n    } = _ref;\n    recordsInTimeframe = getRecordsInTimeframe(timeframeIndex, records);\n    acc[name] = {\n      'Total Posts': recordsInTimeframe.length,\n      ...getTotalAndAverageFromRecords(recordsInTimeframe)\n    };\n    return acc;\n  }, {});\n}\n\nfunction getTotalAndAverageFromRecords(records) {\n  const calculations = metrics.reduce((acc, metric) => {\n    acc[`Total ${metric}`] = 0;\n    return acc;\n  }, {});\n  const len = records.length;\n\n  for (const record of records) {\n    metrics.forEach(metric => {\n      calculations[`Total ${metric}`] += parseFloat(record[metric]);\n    });\n  }\n\n  metrics.forEach(metric => {\n    calculations[`Average ${metric}`] = len === 0 ? 0 : calculations[`Total ${metric}`] / len;\n  });\n  return calculations;\n}\n\nmodule.exports = getAggregatedStats;","map":{"version":3,"names":["getAggregatedStats","records","agreggated","platform","Object","keys","getStats","totalRecords","values","flat","timeframes","reduce","acc","timeframeIndex","name","recordsInTimeframe","getRecordsInTimeframe","length","getTotalAndAverageFromRecords","calculations","metrics","metric","len","record","forEach","parseFloat","module","exports"],"sources":["/Users/milanravenell/Documents/digital_dash/digital-dash-app/src/data-manipulations/get-aggregated-stats.js"],"sourcesContent":["function getAggregatedStats(records) {\n    const agreggated = {};\n    for (const platform of Object.keys(records)) {\n        agreggated[platform] = getStats(records[platform]);\n    }\n\n    const totalRecords = Object.values(records).flat();\n    agreggated['global'] = getStats(totalRecords);\n\n    return agreggated;\n}\n\nfunction getStats(records) {\n    return timeframes\n        .reduce((acc, { name }, timeframeIndex) => {\n            recordsInTimeframe = getRecordsInTimeframe(timeframeIndex, records);\n        \n            acc[name] = {\n                'Total Posts': recordsInTimeframe.length,\n                ...getTotalAndAverageFromRecords(recordsInTimeframe)\n            }\n            return acc;\n        }, {});\n}\n\nfunction getTotalAndAverageFromRecords(records) {\n    const calculations = metrics.reduce((acc, metric) => {\n        acc[`Total ${metric}`] = 0\n        return acc\n    }, {});\n\n    const len = records.length;\n\n    for (const record of records) {\n        metrics.forEach((metric) => {\n            calculations[`Total ${metric}`] += parseFloat((record[metric]));\n        });\n    }\n\n    metrics.forEach((metric) => {\n        calculations[`Average ${metric}`] = (len === 0) ? 0 : calculations[`Total ${metric}`] / len\n    });\n\n    return calculations;\n}\n\nmodule.exports = getAggregatedStats;"],"mappings":"AAAA,SAASA,kBAAT,CAA4BC,OAA5B,EAAqC;EACjC,MAAMC,UAAU,GAAG,EAAnB;;EACA,KAAK,MAAMC,QAAX,IAAuBC,MAAM,CAACC,IAAP,CAAYJ,OAAZ,CAAvB,EAA6C;IACzCC,UAAU,CAACC,QAAD,CAAV,GAAuBG,QAAQ,CAACL,OAAO,CAACE,QAAD,CAAR,CAA/B;EACH;;EAED,MAAMI,YAAY,GAAGH,MAAM,CAACI,MAAP,CAAcP,OAAd,EAAuBQ,IAAvB,EAArB;EACAP,UAAU,CAAC,QAAD,CAAV,GAAuBI,QAAQ,CAACC,YAAD,CAA/B;EAEA,OAAOL,UAAP;AACH;;AAED,SAASI,QAAT,CAAkBL,OAAlB,EAA2B;EACvB,OAAOS,UAAU,CACZC,MADE,CACK,CAACC,GAAD,QAAgBC,cAAhB,KAAmC;IAAA,IAA7B;MAAEC;IAAF,CAA6B;IACvCC,kBAAkB,GAAGC,qBAAqB,CAACH,cAAD,EAAiBZ,OAAjB,CAA1C;IAEAW,GAAG,CAACE,IAAD,CAAH,GAAY;MACR,eAAeC,kBAAkB,CAACE,MAD1B;MAER,GAAGC,6BAA6B,CAACH,kBAAD;IAFxB,CAAZ;IAIA,OAAOH,GAAP;EACH,CATE,EASA,EATA,CAAP;AAUH;;AAED,SAASM,6BAAT,CAAuCjB,OAAvC,EAAgD;EAC5C,MAAMkB,YAAY,GAAGC,OAAO,CAACT,MAAR,CAAe,CAACC,GAAD,EAAMS,MAAN,KAAiB;IACjDT,GAAG,CAAE,SAAQS,MAAO,EAAjB,CAAH,GAAyB,CAAzB;IACA,OAAOT,GAAP;EACH,CAHoB,EAGlB,EAHkB,CAArB;EAKA,MAAMU,GAAG,GAAGrB,OAAO,CAACgB,MAApB;;EAEA,KAAK,MAAMM,MAAX,IAAqBtB,OAArB,EAA8B;IAC1BmB,OAAO,CAACI,OAAR,CAAiBH,MAAD,IAAY;MACxBF,YAAY,CAAE,SAAQE,MAAO,EAAjB,CAAZ,IAAmCI,UAAU,CAAEF,MAAM,CAACF,MAAD,CAAR,CAA7C;IACH,CAFD;EAGH;;EAEDD,OAAO,CAACI,OAAR,CAAiBH,MAAD,IAAY;IACxBF,YAAY,CAAE,WAAUE,MAAO,EAAnB,CAAZ,GAAqCC,GAAG,KAAK,CAAT,GAAc,CAAd,GAAkBH,YAAY,CAAE,SAAQE,MAAO,EAAjB,CAAZ,GAAkCC,GAAxF;EACH,CAFD;EAIA,OAAOH,YAAP;AACH;;AAEDO,MAAM,CAACC,OAAP,GAAiB3B,kBAAjB"},"metadata":{},"sourceType":"module"}