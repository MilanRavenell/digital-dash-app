{"ast":null,"code":"function getGraphData(records, timeframe) {\n  const partitions = timeframe.graphPartitions;\n  const viewsPartitoned = partitions.reduce((acc, partition) => ({ ...acc,\n    [partition]: 0\n  }), {});\n  const engagementPartitioned = partitions.reduce((acc, partition) => ({ ...acc,\n    [partition]: 0\n  }), {});\n  let partitionIndex = 0;\n  data.every(datum => {\n    while (new Date(datum['Date']) < new Date(partitions[partitionIndex])) {\n      ++partitionIndex;\n\n      if (partitionIndex >= partitions.length) {\n        return false;\n      }\n    }\n\n    const partition = partitions[partitionIndex];\n    viewsPartitoned[partition] += parseInt(datum['Views']);\n    engagementPartitioned[partition] += parseInt(datum['Total Engagement']);\n    return true;\n  });\n  console.log(viewsPartitoned);\n  return {\n    labels: partitions.reverse(),\n    datasets: [{\n      label: 'Views',\n      data: Object.values(viewsPartitoned).reverse(),\n      backgroundColor: 'rgba(255, 99, 132, 0.5)'\n    }, {\n      label: 'Engagement',\n      data: Object.values(engagementPartitioned).reverse(),\n      backgroundColor: 'rgba(53, 162, 235, 0.5)'\n    }]\n  };\n}\n\nmodule.exports = getGraphData;","map":{"version":3,"names":["getGraphData","records","timeframe","partitions","graphPartitions","viewsPartitoned","reduce","acc","partition","engagementPartitioned","partitionIndex","data","every","datum","Date","length","parseInt","console","log","labels","reverse","datasets","label","Object","values","backgroundColor","module","exports"],"sources":["/Users/milanravenell/Documents/digital_dash/digital-dash-app/src/data-manipulations/get-graph-data.js"],"sourcesContent":["function getGraphData(records, timeframe) {\n\n    const partitions = timeframe.graphPartitions;\n\n    const viewsPartitoned = partitions.reduce((acc, partition) => ({ ...acc, [partition]: 0 }), {});\n    const engagementPartitioned = partitions.reduce((acc, partition) => ({ ...acc, [partition]: 0 }), {});\n\n    let partitionIndex = 0;\n    data.every((datum) => {\n        while (new Date(datum['Date']) < new Date(partitions[partitionIndex])) {\n            ++partitionIndex;\n            if (partitionIndex >= partitions.length) {\n                return false;\n            }\n        }\n\n        const partition = partitions[partitionIndex];\n        viewsPartitoned[partition] += parseInt(datum['Views']);\n        engagementPartitioned[partition] += parseInt(datum['Total Engagement']);\n        return true;\n    });\n\n    console.log(viewsPartitoned)\n\n\n    return {\n        labels: partitions.reverse(),\n        datasets: [\n            {\n                label: 'Views',\n                data: Object.values(viewsPartitoned).reverse(),\n                backgroundColor: 'rgba(255, 99, 132, 0.5)',\n            },\n            {\n                label: 'Engagement',\n                data: Object.values(engagementPartitioned).reverse(),\n                backgroundColor: 'rgba(53, 162, 235, 0.5)',\n            },\n        ]\n    };\n}\n\nmodule.exports = getGraphData;"],"mappings":"AAAA,SAASA,YAAT,CAAsBC,OAAtB,EAA+BC,SAA/B,EAA0C;EAEtC,MAAMC,UAAU,GAAGD,SAAS,CAACE,eAA7B;EAEA,MAAMC,eAAe,GAAGF,UAAU,CAACG,MAAX,CAAkB,CAACC,GAAD,EAAMC,SAAN,MAAqB,EAAE,GAAGD,GAAL;IAAU,CAACC,SAAD,GAAa;EAAvB,CAArB,CAAlB,EAAoE,EAApE,CAAxB;EACA,MAAMC,qBAAqB,GAAGN,UAAU,CAACG,MAAX,CAAkB,CAACC,GAAD,EAAMC,SAAN,MAAqB,EAAE,GAAGD,GAAL;IAAU,CAACC,SAAD,GAAa;EAAvB,CAArB,CAAlB,EAAoE,EAApE,CAA9B;EAEA,IAAIE,cAAc,GAAG,CAArB;EACAC,IAAI,CAACC,KAAL,CAAYC,KAAD,IAAW;IAClB,OAAO,IAAIC,IAAJ,CAASD,KAAK,CAAC,MAAD,CAAd,IAA0B,IAAIC,IAAJ,CAASX,UAAU,CAACO,cAAD,CAAnB,CAAjC,EAAuE;MACnE,EAAEA,cAAF;;MACA,IAAIA,cAAc,IAAIP,UAAU,CAACY,MAAjC,EAAyC;QACrC,OAAO,KAAP;MACH;IACJ;;IAED,MAAMP,SAAS,GAAGL,UAAU,CAACO,cAAD,CAA5B;IACAL,eAAe,CAACG,SAAD,CAAf,IAA8BQ,QAAQ,CAACH,KAAK,CAAC,OAAD,CAAN,CAAtC;IACAJ,qBAAqB,CAACD,SAAD,CAArB,IAAoCQ,QAAQ,CAACH,KAAK,CAAC,kBAAD,CAAN,CAA5C;IACA,OAAO,IAAP;EACH,CAZD;EAcAI,OAAO,CAACC,GAAR,CAAYb,eAAZ;EAGA,OAAO;IACHc,MAAM,EAAEhB,UAAU,CAACiB,OAAX,EADL;IAEHC,QAAQ,EAAE,CACN;MACIC,KAAK,EAAE,OADX;MAEIX,IAAI,EAAEY,MAAM,CAACC,MAAP,CAAcnB,eAAd,EAA+Be,OAA/B,EAFV;MAGIK,eAAe,EAAE;IAHrB,CADM,EAMN;MACIH,KAAK,EAAE,YADX;MAEIX,IAAI,EAAEY,MAAM,CAACC,MAAP,CAAcf,qBAAd,EAAqCW,OAArC,EAFV;MAGIK,eAAe,EAAE;IAHrB,CANM;EAFP,CAAP;AAeH;;AAEDC,MAAM,CAACC,OAAP,GAAiB3B,YAAjB"},"metadata":{},"sourceType":"module"}